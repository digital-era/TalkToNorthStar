<!DOCTYPE html>
<!-- lang attribute will be set by JavaScript -->
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- title will be set by JavaScript -->
    <title data-i18n-key="pageTitle" data-i18n-target="title">对话北极星</title>
    <!-- 引入 Google Font "Poppins" -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!--link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600&display=swap" rel="stylesheet" -->
    <!--link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@500;700&family=Ma+Shan+Zheng&family=ZCOOL+XiaoWei&display=swap" rel="stylesheet" -->
    <!--link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@500;700&family=Ma+Shan+Zheng&family=Playfair+Display:ital,wght@0,400..900;1,400..900&family=ZCOOL+XiaoWei&display=swap" rel="stylesheet" -->
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@500;700&family=Ma+Shan+Zheng&family=Noto+Serif+SC:wght@300;400;700&family=Playfair+Display:ital,wght@0,400..900;1,400..900&family=ZCOOL+XiaoWei&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://npm.elemecdn.com/lxgw-wenkai-screen-webfont/style.css" media="print" onload="this.media='all'">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?4f7668a6be06565377d8578e2fc73238";
          var s = document.getElementsByTagName("script")[0]; 
          s.parentNode.insertBefore(hm, s);
        })();
    </script>
    <script>
      var _hmt = _hmt || [];
      (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?6f10ee37f81ce474f6bebaabad0da6d7";
        var s = document.getElementsByTagName("script")[0]; 
        s.parentNode.insertBefore(hm, s);
      })();
    </script>
    
    <!-- *** START: MathJax Integration *** -->
    <script>
      MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']]
        },
        svg: {
          fontCache: 'global'
        }
      };
    </script>
    <script type="text/javascript" id="MathJax-script" async
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
    </script>
    <!-- *** END: MathJax Integration *** -->
    <!-- 引入 marked.js 用于解析 Markdown -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <!-- 引入 html2canvas 和 jsPDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/modernfilterUI.css">
</head>
<body>

  <header>
        <div class="logo-container">
            <img src="images/TalktoNorthStarIcon.png" alt="Talk to NorthStar Logo">
        </div>
        <div class="top-right-controls">
            <!-- 1. [新增] 音乐播放器 (移到第一位，即最左侧) -->
            <!-- 注意：请确保 music/HansZimmer-Interstellar-ImperialOrchestra.mp3 文件存在，或修改为有效路径 -->
            <div class="icon-btn music-wrapper" title="背景音乐" onclick="toggleMusic(this)">
                <i class="fas fa-music main-music-icon"></i>
                
                <!-- 随机播放小标记 -->
                <div class="random-badge" title="随机播放 (未来功能)" onclick="playRandomMusic(event)">
                    <i class="fas fa-shuffle"></i>
                </div>
                
                <!-- 音频控件 -->
                <audio id="bgMusic" loop>
                    <source src="music/HansZimmer-Interstellar-ImperialOrchestra.mp3" type="audio/mpeg">
                </audio>
            </div>

            <!-- 2. 开启星语阅读：只留图标，增加 title 提示 -->
            <button class="icon-btn" onclick="openElegantMode()" title="星语阅读">
                <i class="fas fa-wand-magic-sparkles"></i>
            </button>

            <!-- 3. 开启对话画布 -->
            <button class="icon-btn" onclick="openDialogueCanvas()" title="思想画布">
                <i class="fas fa-scroll"></i> <!-- 使用卷轴图标 -->
            </button>
            
            <!-- 4. 了解我们：去掉文字 span，只留图标，增加 title 提示 -->
            <button class="icon-btn" onclick="openManifestoModal()" title="了解我们">
                <i class="fas fa-circle-info"></i>                 
            </button>
        
            <!-- 5. 设置：去掉文字 span，只留图标 -->
            <a href="#" onclick="openApiSettingsModal(event)" class="icon-btn" title="设置">
                <i class="fas fa-cog"></i>
            </a>
        
            <!-- 6. 语言：图标 + 透明下拉框组合 -->
            <div class="icon-btn language-wrapper" title="切换语言">
                <!-- 新增的语言图标 -->
                <i class="fas fa-globe"></i>
                <!-- 原有的 select，但移除了 visible class，通过 CSS 隐藏外观 -->
                <!-- 现代界面 修改后：用分号隔开，同时调用两个函数 -->
                <select id="languageSelector" onchange="setLanguage(this.value); window.onLanguageChanged()">
                    <option value="zh-CN">简体中文</option>
                    <option value="en">English</option>
                </select>
            </div>
            
            <!-- 7. 新增：现代界面风格（紧跟语言后面） -->
            <div class="icon-btn style-wrapper" title="界面风格">
                <i class="fas fa-palette"></i>
                <select id="uiStyle" onchange="switchUIStyle(this.value)">                    
                    <option value="modern" selected>现代</option>
                    <option value="traditional">传统</option>
                </select>
            </div>
        </div>
        <!-- h1 保持原位，但会通过 margin-top 被向下推 -->
        <h1 data-i18n-key="headerTitleComplete" data-i18n-target="innerHTML">对话北极星</h1>
        <!-- 传统/现代风格UI切换 -->
        
    </header>

    <div class="container">
        <!-- ... rest of the body is unchanged ... -->
        <div class="tabs">
            <button class="tab-button active" onclick="openTab(event, 'ai')" data-i18n-key="tabAi">AI</button>
            <button class="tab-button" onclick="openTab(event, 'quantum')" data-i18n-key="tabQuantum">量子</button>
            <button class="tab-button" onclick="openTab(event, 'universe')" data-i18n-key="tabUniverse">宇宙</button>
            <button class="tab-button" onclick="openTab(event, 'humanities')" data-i18n-key="tabHumanities">人文</button>
            <button class="tab-button" onclick="openTab(event, 'art')" data-i18n-key="tabArt">艺术</button>            
            <button class="tab-button" onclick="openTab(event, 'finance')" data-i18n-key="tabFinance">金融</button>
            <button class="tab-button" onclick="openTab(event, 'sport')" data-i18n-key="tabSport">艺术</button>
            <button class="tab-button" onclick="openTab(event, 'chinaEntrepreneurs')" data-i18n-key="tabChinaEntrepreneurs">中华</button>
        </div>

        <div id="ai" class="tab-content active">
            <h2 data-i18n-key="selectAiLeader">选择一位泛AI北极星</h2>
            <!-- 现代风格专用：胶囊过滤 + 搜索区域 -->
            <div class="modern-filter-bar" style="display:none;">
                
                <!-- 【修改点】 1. 将搜索框移到最前面 (作为左侧固定区) -->
                <div class="modern-search-wrapper">
                    <!-- 注意：这里去掉了 onclick，改用 CSS/JS 控制更流畅，或者保留 onclick 但要确保 JS 逻辑正确 -->
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" class="modern-search-input" placeholder="搜索..." oninput="filterModernGrid(this)">
                </div>
        
                <!-- 【修改点】 2. 胶囊容器放在后面 (作为右侧滑动区) -->
                <div class="filter-chips-container">
                    <!-- JS 动态生成内容 -->
                </div>
                
            </div>
            
            <div class="leader-scroll-container">
                <button class="scroll-button left" onclick="scrollGrid(this, -1)" aria-label="Scroll Left"><</button>
                <div class="leader-grid" id="aiGrid"></div>
                <button class="scroll-button right" onclick="scrollGrid(this, 1)" aria-label="Scroll Right">></button>
            </div>
        </div>

        <div id="quantum" class="tab-content">
            <h2 data-i18n-key="selectQuantumLeader">选择一位泛量子北极星</h2>
            <!-- 现代风格专用：胶囊过滤 + 搜索区域 -->
            <div class="modern-filter-bar" style="display:none;">
                
                <!-- 【修改点】 1. 将搜索框移到最前面 (作为左侧固定区) -->
                <div class="modern-search-wrapper">
                    <!-- 注意：这里去掉了 onclick，改用 CSS/JS 控制更流畅，或者保留 onclick 但要确保 JS 逻辑正确 -->
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" class="modern-search-input" placeholder="搜索..." oninput="filterModernGrid(this)">
                </div>
        
                <!-- 【修改点】 2. 胶囊容器放在后面 (作为右侧滑动区) -->
                <div class="filter-chips-container">
                    <!-- JS 动态生成内容 -->
                </div>
                
            </div>
            
            <div class="leader-scroll-container">
                <button class="scroll-button left" onclick="scrollGrid(this, -1)" aria-label="Scroll Left"><</button>
                <div class="leader-grid" id="quantumGrid"></div>
                <button class="scroll-button right" onclick="scrollGrid(this, 1)" aria-label="Scroll Right">></button>
            </div>            
        </div>

        <div id="universe" class="tab-content">
            <h2 data-i18n-key="selectUniverseLeader">选择一位泛宇宙北极星</h2>
            <!-- 现代风格专用：胶囊过滤 + 搜索区域 -->
            <div class="modern-filter-bar" style="display:none;">
                
                <!-- 【修改点】 1. 将搜索框移到最前面 (作为左侧固定区) -->
                <div class="modern-search-wrapper">
                    <!-- 注意：这里去掉了 onclick，改用 CSS/JS 控制更流畅，或者保留 onclick 但要确保 JS 逻辑正确 -->
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" class="modern-search-input" placeholder="搜索..." oninput="filterModernGrid(this)">
                </div>
        
                <!-- 【修改点】 2. 胶囊容器放在后面 (作为右侧滑动区) -->
                <div class="filter-chips-container">
                    <!-- JS 动态生成内容 -->
                </div>
                
            </div>
            
            <div class="leader-scroll-container">
                <button class="scroll-button left" onclick="scrollGrid(this, -1)" aria-label="Scroll Left"><</button>
                <div class="leader-grid" id="universeGrid"></div>
                <button class="scroll-button right" onclick="scrollGrid(this, 1)" aria-label="Scroll Right">></button>
            </div>            
        </div>

       <div id="humanities" class="tab-content">
            <h2 data-i18n-key="selectHumanitiesLeader">选择一位泛人文领域北极星</h2>
            <!-- 现代风格专用：胶囊过滤 + 搜索区域 -->
            <div class="modern-filter-bar" style="display:none;">
                
                <!-- 【修改点】 1. 将搜索框移到最前面 (作为左侧固定区) -->
                <div class="modern-search-wrapper">
                    <!-- 注意：这里去掉了 onclick，改用 CSS/JS 控制更流畅，或者保留 onclick 但要确保 JS 逻辑正确 -->
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" class="modern-search-input" placeholder="搜索..." oninput="filterModernGrid(this)">
                </div>
        
                <!-- 【修改点】 2. 胶囊容器放在后面 (作为右侧滑动区) -->
                <div class="filter-chips-container">
                    <!-- JS 动态生成内容 -->
                </div>
                
            </div>
           
            <div class="leader-scroll-container">
                <button class="scroll-button left" onclick="scrollGrid(this, -1)" aria-label="Scroll Left"><</button>
                <div class="leader-grid" id="humanitiesGrid"></div>
                <button class="scroll-button right" onclick="scrollGrid(this, 1)" aria-label="Scroll Right">></button>
            </div>           
        </div>

        <div id="art" class="tab-content">
            <h2 data-i18n-key="selectArtLeader">选择一位泛艺术领域北极星</h2>
            <!-- 现代风格专用：胶囊过滤 + 搜索区域 -->
            <div class="modern-filter-bar" style="display:none;">
                
                <!-- 【修改点】 1. 将搜索框移到最前面 (作为左侧固定区) -->
                <div class="modern-search-wrapper">
                    <!-- 注意：这里去掉了 onclick，改用 CSS/JS 控制更流畅，或者保留 onclick 但要确保 JS 逻辑正确 -->
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" class="modern-search-input" placeholder="搜索..." oninput="filterModernGrid(this)">
                </div>
        
                <!-- 【修改点】 2. 胶囊容器放在后面 (作为右侧滑动区) -->
                <div class="filter-chips-container">
                    <!-- JS 动态生成内容 -->
                </div>
                
            </div>
            
            <div class="leader-scroll-container">
                <button class="scroll-button left" onclick="scrollGrid(this, -1)" aria-label="Scroll Left"><</button>
                <div class="leader-grid" id="artGrid"></div>
                <button class="scroll-button right" onclick="scrollGrid(this, 1)" aria-label="Scroll Right">></button>
            </div>            
        </div>
        
        <div id="finance" class="tab-content">
            <h2 data-i18n-key="selectFinanceLeader">选择一位泛金融北极星</h2>
            <!-- 现代风格专用：胶囊过滤 + 搜索区域 -->
            <div class="modern-filter-bar" style="display:none;">
                
                <!-- 【修改点】 1. 将搜索框移到最前面 (作为左侧固定区) -->
                <div class="modern-search-wrapper">
                    <!-- 注意：这里去掉了 onclick，改用 CSS/JS 控制更流畅，或者保留 onclick 但要确保 JS 逻辑正确 -->
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" class="modern-search-input" placeholder="搜索..." oninput="filterModernGrid(this)">
                </div>
        
                <!-- 【修改点】 2. 胶囊容器放在后面 (作为右侧滑动区) -->
                <div class="filter-chips-container">
                    <!-- JS 动态生成内容 -->
                </div>
                
            </div>
            
            <div class="leader-scroll-container">
                <button class="scroll-button left" onclick="scrollGrid(this, -1)" aria-label="Scroll Left"><</button>
                <div class="leader-grid" id="financeGrid"></div>
                <button class="scroll-button right" onclick="scrollGrid(this, 1)" aria-label="Scroll Right">></button>
            </div>            
        </div>

        <div id="sport" class="tab-content">
            <h2 data-i18n-key="selectSportLeader">选择一位泛竞技领域北极星</h2>
            <!-- 现代风格专用：胶囊过滤 + 搜索区域 -->
            <div class="modern-filter-bar" style="display:none;">
                
                <!-- 【修改点】 1. 将搜索框移到最前面 (作为左侧固定区) -->
                <div class="modern-search-wrapper">
                    <!-- 注意：这里去掉了 onclick，改用 CSS/JS 控制更流畅，或者保留 onclick 但要确保 JS 逻辑正确 -->
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" class="modern-search-input" placeholder="搜索..." oninput="filterModernGrid(this)">
                </div>
        
                <!-- 【修改点】 2. 胶囊容器放在后面 (作为右侧滑动区) -->
                <div class="filter-chips-container">
                    <!-- JS 动态生成内容 -->
                </div>
                
            </div>
            
            <div class="leader-scroll-container">
                <button class="scroll-button left" onclick="scrollGrid(this, -1)" aria-label="Scroll Left"><</button>
                <div class="leader-grid" id="sportGrid"></div>
                <button class="scroll-button right" onclick="scrollGrid(this, 1)" aria-label="Scroll Right">></button>
            </div>            
        </div>

        <div id="chinaEntrepreneurs" class="tab-content">
            <h2 data-i18n-key="selectChinaEntrepreneursLeader">选择一位泛中华北极星</h2>
            <!-- 现代风格专用：胶囊过滤 + 搜索区域 -->
            <div class="modern-filter-bar" style="display:none;">
                
                <!-- 【修改点】 1. 将搜索框移到最前面 (作为左侧固定区) -->
                <div class="modern-search-wrapper">
                    <!-- 注意：这里去掉了 onclick，改用 CSS/JS 控制更流畅，或者保留 onclick 但要确保 JS 逻辑正确 -->
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" class="modern-search-input" placeholder="搜索..." oninput="filterModernGrid(this)">
                </div>
        
                <!-- 【修改点】 2. 胶囊容器放在后面 (作为右侧滑动区) -->
                <div class="filter-chips-container">
                    <!-- JS 动态生成内容 -->
                </div>
                
            </div>
            
             <div class="leader-scroll-container">
                <button class="scroll-button left" onclick="scrollGrid(this, -1)" aria-label="Scroll Left"><</button>
                <div class="leader-grid" id="chinaEntrepreneursGrid"></div>
                <button class="scroll-button right" onclick="scrollGrid(this, 1)" aria-label="Scroll Right">></button>
            </div>            
        </div>
        
        <div class="interaction-area">
            <h2 data-i18n-key="interactWithLeader">与北极星对话</h2>
            <!-- --- 修改开始：增加右侧小图标 --- -->
            <div id="selected-leader-info">
                <div>
                    <span data-i18n-key="currentSelectedLeaderPrefix">当前选择的北极星: </span>
                    <span id="selectedLeaderName" data-i18n-key="noLeaderSelectedInitial">无</span>
                </div>
                <!-- 点击此图标调用新的合并拷贝功能 -->
                <i class="fas fa-copy copy-leader-btn"
                   onclick="copyConversationToClipboard()"
                   aria-label="Copy conversation"
                   data-i18n-key="tooltipCopyConversation"
                   data-i18n-target="aria-label"></i>
            </div>
            <!-- --- 修改结束 --- -->
            <textarea id="userQuestion" data-i18n-key="placeholderUserQuestion" data-i18n-target="placeholder"></textarea>
            
            <div class="interaction-buttons">
                <button onclick="generateAndShowPrompt()" data-i18n-key="btnGeneratePrompt">1. 生成 问题</button>
                <button id="getAIResponseButton" onclick="getAIResponse()">
                    <span data-i18n-key="btnGetAiResponse">2. 获取 北极星 回复</span>
                    <span id="loadingIndicator" style="display:none;" class="loading-spinner"></span>
                </button>
                <!-- --- 修改开始：按钮改名，移除原有 onclick --- -->
                 <button id="immersiveModeButton" onclick="handleImmersiveMode()" data-i18n-key="btnImmersiveMode">深度沉浸模式 (未来构想)</button>
                <!-- --- 修改结束 --- -->
            </div>

            <div id="prompt-display-area" class="response-display" style="display:none;">
                <!-- 头部：包含标题和旋转箭头 -->
                <div class="collapsible-header" onclick="togglePromptCollapse()" style="cursor: pointer; display: flex; justify-content: space-between; align-items: center;">
                    <h4 data-i18n-key="generatedPromptTitle" style="margin: 0;">生成的 问题 (对选择北极星):</h4>
                    <i id="prompt-toggle-icon" class="fas fa-chevron-down" style="transition: transform 0.3s ease; color: var(--dark-text-secondary);"></i>
                </div>
                <!-- 内容区：默认隐藏 -->
                <div id="prompt-collapsible-content" style="display: none; margin-top: 15px;">
                    <textarea id="generatedPromptText"></textarea>
                </div>
            </div>
            
            <div id="ai-response-area" class="response-display" style="display:none;">
                <h4 data-i18n-key="aiResponseTitle">AI 回复:</h4>
                <!-- *** MODIFICATION START: Changed <pre> to <div> *** -->
                <div id="aiResponseText"></div>
                <!-- *** MODIFICATION END *** -->
            </div>
        </div>
    </div>
    
    <div id="apiSettingsModal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeApiSettingsModal()">×</span>
            <!-- 模态框标题的 data-i18n-key 应该在 h2 上，因为它可能没有内部的 span -->
            <h2 data-i18n-key="modalTitle"><i class="fas fa-cog"></i> API及模型设置</h2> 
            <div class="settings-form">
                <div class="form-group">
                    <label for="apiEndpoint" style="display: flex; align-items: center;">
                        <i class="fas fa-server" style="margin-right: 8px;"></i> 
                        <span data-i18n-key="labelApiEndpoint">模型接入点:</span>
                    </label>
                    <select id="apiEndpoint">
                    </select>
                </div>
                <div class="form-group">
                    <label for="apiKey" style="display: flex; align-items: center;">
                        <i class="fas fa-key" style="margin-right: 8px;"></i> 
                        <span data-i18n-key="labelApiKey">API Key :</span>
                    </label>
                    <input type="password" id="apiKey" data-i18n-key="placeholderApiKey" data-i18n-target="placeholder">
                </div>
                <div class="form-group">
                    <label for="apiModel" style="display: flex; align-items: center;">
                        <i class="fas fa-robot" style="margin-right: 8px;"></i> 
                        <span data-i18n-key="labelApiModel">模型选择:</span>
                    </label>
                    <select id="apiModel">
                    </select>
                </div>
                <!-- 设为默认模型选项 (这个已经正常显示，无需更改) -->
                <div class="form-group">
                    <label style="display: flex; align-items: center;">
                        <i class="fas fa-star" style="margin-right: 8px; color: gold;"></i> 
                        <span data-i18n-key="labelSetDefaultModel">设为默认模型</span>
                        <input type="checkbox" id="apiDefaultModelCheck" style="margin-left: 10px;">
                    </label>
                </div>
                <button onclick="saveApiSettings()" class="save-btn">
                    <i class="fas fa-save"></i> 
                    <span data-i18n-key="saveBtnText">保存设置</span>
                </button>
            </div>
        </div>
    </div>

    <!-- 新增宣言模态框的HTML -->
    <div id="manifestoModal" class="modal manifesto-modal">
        <div class="modal-content large">
            <span class="close-button" onclick="closeManifestoModal()">×</span>
            <div class="manifesto-text">
                <!-- 调整标题和段落，以便通过 JS 更新内容 -->
                <h2 id="manifestoModalTitle">《对话北极星》——书写思想旋律，点燃探索火花，让深度对话触手可及</h2>
                <p id="manifestoPara1">你，是否曾仰望星空，渴望与群星对话？</p>
                <p id="manifestoPara2">在知识的浩瀚海洋中，我们时常感到迷茫，被信息的洪流裹挟，被表面的喧嚣困扰。我们追逐着零散的知识碎片，却鲜少有机会触及那些真正塑造人类文明的深刻思想。</p>
                <p id="manifestoPara3">达·芬奇、爱因斯坦、海明威、马斯克……他们的卓越并非偶然，而是源于对世界运转的深刻洞察：物理的第一性原理、艺术的无限可能、人性的光辉与挑战。他们理解系统，面对混沌，每一次的远见与修正都如北极星般指引，最终塑造了他们的时代。</p>
                <p id="manifestoPara4">我们不再只是被动地接收信息，而是主动去触碰那些照亮人类文明的智慧之光。</p>
                <p id="manifestoPara5">想象一下：你轻轻点击，就能与OpenAI的Sam Altman探讨通用人工智能的伦理边界，或与Google DeepMind的Demis Hassabis共话AI如何加速科学发现；你可以与量子理论的Max Planck回溯能量量子化的起源，也能与Google量子AI实验室的Hartmut Neven展望量子计算的未来。</p>
                <p id="manifestoPara6">如果你对商业的脉搏充满好奇，可以与巴菲特洞察价值投资的精髓，或和腾讯的马化腾分析社交媒体的演变。在文学的殿堂，与莎士比亚品味人性的悲喜，或随马尔克斯的魔幻现实主义漫游拉美大地；艺术的殿堂里，与达·芬奇共鸣科学与艺术的融合，或与梵高感受色彩深处的情感。更可以与中国家电巨头美的的方洪波探讨智能制造的未来，或跟比亚迪的王传福展望新能源汽车的蓝图。</p>
                <p id="manifestoPara7">这不仅仅是技术，更是一次灵魂的邀约，一次思维的远征。我们精心构建《对话北极星》，让AI化身为连接人类智慧与潜能的桥梁。它严格遵循每一位“北极星”人物的思想框架、专业领域和语言风格，确保每一次回复都深邃而富有启发性。</p>
                <p id="manifestoPara8">你无需穷尽所有数据，也无需在噪音中苦寻信号。在这里，你的每一个问题，都将得到北极星般的回应。每一次提问，都可能激发你内心深处未曾触及的创新火花；每一次对话，都将拓展你认知世界的边界，推动你个人成长的进程。</p>
                <p class="conclusion" id="manifestoModalConclusion"><em>我们使命是以AI原生智慧，书写思想旋律，点燃探索火花——让深度对话触手可及。</em></p>
            </div>
        </div>
    </div>

    <!-- 新增：沉浸模式介绍模态框 -->
    <div id="immersiveModal" class="modal manifesto-modal">
        <div class="modal-content large">
            <span class="close-button" onclick="closeImmersiveModal()">×</span>
            <div class="manifesto-text">
                <h2 data-i18n-key="immersiveTitle">《对话北极星》沉浸模式：以多模态旋律，重谱信仰的乐章</h2>
                
                <h3 data-i18n-key="immersiveCoreTitle" class="modal-section-title">【核心理念】</h3>
                <p data-i18n-key="immersiveCoreText">
                    文字，仅仅是思想的影子。真正的智慧信仰，流淌在声音的起伏中，凝结在岁月的深邃里，共振于环境的氛围间。我们将AI化作感官的笔触，为您重建那座失落的巴别塔。
                </p>
    
                <h3 data-i18n-key="immersiveFuncTitle" class="modal-section-title">【功能诗篇】</h3>
    
                <div class="immersive-feature">
                    <h4 data-i18n-key="immersiveFeat1Title" class="modal-section-title">初见 · 灵魂的底色</h4>
                    <blockquote data-i18n-key="immersiveFeat1Desc" data-i18n-target="innerHTML">
                        <em>默认展现表征情感与思想内涵的视觉与听觉场域</em><br>
                        当你点亮一位“北极星”，屏幕不再是平面的玻璃，而是一扇通往他精神世界的窗。
                        在你开口之前，海明威的雪茄烟雾已在哈瓦那的背景音中缭绕，达·芬奇画室的光影已洒满画布。我们要展现的，不仅仅是他们的形象，更是那段历史的<strong>氛围与体温</strong>。每一张背景图、每一段前奏曲，都是这位北极星灵魂底色的映照。
                    </blockquote>
                </div>
    
                <div class="immersive-feature">
                    <h4 data-i18n-key="immersiveFeat2Title" class="modal-section-title">共振 · 随心流动的交响</h4>
                    <blockquote data-i18n-key="immersiveFeat2Desc" data-i18n-target="innerHTML">
                        <em>针对对话主题，动态生成契合的图、文、声、乐</em><br>
                        对话是一场流动的盛宴。当你与巴菲特聊起1929年的大萧条，背景乐会悄然转为低沉的大提琴，画风染上历史的颗粒感；当你与马斯克展望火星殖民，电子合成器的激昂旋律将随之升腾，深空的壮丽图景在眼前铺陈。
                        你的声音与北极星的声音在云端交汇，<strong>AI实时编曲，让情绪互通</strong>。不仅是你在对话，更是世界在随你的思维起舞。
                    </blockquote>
                </div>
    
                <div class="immersive-feature">
                    <h4 data-i18n-key="immersiveFeat3Title" class="modal-section-title">临在 · 跨越时空的凝视</h4>
                    <blockquote data-i18n-key="immersiveFeat3Desc" data-i18n-target="innerHTML">
                        <em>动态生成高度一致性、连续性的视频与立体空间视听</em><br>
                        告别碎片的拼接，迎来连贯的生命。
                        依托最前沿的视频生成模型，北极星不再静止。你会看到他们思考时眉头的微蹙，听到他们兴奋时语速的加快。立体空间音频技术（Spatial Audio）将你包裹其中，仿佛你正坐在维也纳的咖啡馆或硅谷的会议室对面。
                        <strong>这不仅是视频，这是“在场”。</strong> 是一次打破物理法则的面对面，是两颗心灵在同一时空的深度纠缠。
                    </blockquote>
                </div>
            </div>
        </div>
    </div>

    <!-- [新增] 优雅阅读模式模态框 -->
    <div id="elegantModal" class="modal elegant-modal">
        <div class="elegant-container">
            <!--以此背景模拟纸张或磨砂玻璃-->
            <span class="close-button elegant-close" onclick="closeElegantMode()">×</span>
            
            <div class="elegant-content">
                <!-- 装饰性元素：顶部星号 -->
                <div class="decoration-star"><i class="fas fa-star-of-life"></i></div>
                
                <!-- 用户问题部分 -->
                <div class="elegant-question-section">
                    <div class="elegant-label">QUESTION</div>
                    <div id="elegantQuestionText"></div>
                </div>
                
                <!-- 分割线 -->
                <div class="elegant-divider"></div>
                
                <!-- 北极星回复部分 -->
                <div class="elegant-answer-section">
                    <div class="elegant-label">NORTH STAR INSIGHT</div>
                    <div id="elegantAnswerText"></div>
                </div>
                
                <!-- 底部装饰 -->
                <div class="elegant-footer">
                    <i class="fas fa-feather-pointed"></i> Talk with North Stars
                </div>
            </div>
        </div>
    </div>
    
    <script src="scripts/locale.js"></script>
    <script src="scripts/aiMasters.js"></script>
    <script src="scripts/QuantumMasters.js"></script>
    <script src="scripts/universeMasters.js"></script>
    <script src="scripts/humanitiesMasters.js"></script>
    <script src="scripts/artMasters.js"></script>    
    <script src="scripts/financeMasters.js"></script>
    <script src="scripts/sportMasters.js"></script>
    <script src="scripts/chinaEntrepreneurs.js"></script>    
    <script src="scripts/masters.js"></script>    
    <script src="scripts/modernfilterUI.js"></script>
    <script src="scripts/applogic.js"></script>
    <script src="scripts/importmdfile.js"></script>
    
    <footer>
        <p data-i18n-key="footerRight">© 2025 AI范式进化. 保留所有权利。</p>
    </footer>
    
    <!-- 对话画布模态框 -->
    <div id="dialogueCanvasModal" class="canvas-modal">
        <!-- 关闭按钮 -->
        <button class="canvas-close-btn" onclick="closeDialogueCanvas()">
            <i class="fas fa-times"></i>
        </button>
        
        <!-- 顶部工具栏 -->
        <div class="canvas-toolbar">
            <span class="canvas-title">思想画布</span>
            <button onclick="clearCanvasHistory()" title="清空画布"><i class="fas fa-eraser"></i></button>
            <!-- 新增：导出组 -->
            <!--div class="toolbar-group" style="margin-right: 15px; border-right: 1px solid #ddd; padding-right: 15px; display:inline-block;"-->
            <div class="toolbar-group" style="margin-right: 15px; display:inline-block;">
                <button onclick="exportToPDF()" title="导出PDF"><i class="fas fa-file-pdf"></i></button>
                <button onclick="exportToMD()" title="导出Markdown"><i class="fas fa-file-alt"></i></button>
                <!-- 新增：导出为HTML -->
                <button onclick="exportToHTML()" title="导出HTML"><i class="fas fa-file-code"></i>
                <!-- 新增：导入MD文件 -->
                <button onclick="importFromMD()" title="导入Markdown"><i class="fas fa-file-import"></i>
</button>
            </div>
            <!--
            <button onclick="toggleSidebar()" title="灵感手稿"><i class="fas fa-feather-alt"></i></button>
            -->
        </div>
    
        <!-- 核心画布区域 -->
        <div class="canvas-viewport" id="canvasViewport">
            <!-- SVG层：用于绘制连接线，置于底层 -->
            <svg id="thoughtTrailsSvg" class="thought-trails"></svg>
            <!-- 内容层：存放对话节点 -->
            <div id="thoughtStreamContent" class="thought-stream"></div>
        </div>
    
        <!-- 右侧：灵感手稿/留白区域 -->
        <!-- 
        <div id="inspirationSidebar" class="inspiration-sidebar open">
            <div class="sidebar-header">
                <h3><i class="fas fa-pen-fancy"></i> 灵感手稿</h3>
                <p>拖拽或点击左侧关键概念至此...</p>
            </div>
            <div id="notesContainer" class="notes-container" contenteditable="true" data-placeholder="在这里记录你的顿悟...">
                <!-- 用户笔记将在这里 -->
            </div>
        </div>
        -->
    </div>
    
    <script>
        // --- 宣言模态框控制逻辑 (与您提供的示例脚本一致) ---
        const manifestoModal = document.getElementById('manifestoModal');
        
        function openManifestoModal() {
            if (manifestoModal) {
                manifestoModal.style.display = 'block';
            }
        }
        
        function closeManifestoModal() {
            if (manifestoModal) {
                manifestoModal.style.display = 'none';
            }
        }
        
        // 在 DOM 完全加载后，为按钮绑定事件 (这是更可靠的方法)
        document.addEventListener('DOMContentLoaded', () => {
            const openBtn = document.querySelector('.about-us-button'); // 使用class选择器
            if (openBtn) {
                openBtn.addEventListener('click', openManifestoModal);
            }
        });
        
        // 点击模态框外部区域也可以关闭
        window.addEventListener('click', function(event) {
            if (manifestoModal && event.target == manifestoModal) {
                closeManifestoModal();
            }
        });      

    </script>
    
</body>
</html>
